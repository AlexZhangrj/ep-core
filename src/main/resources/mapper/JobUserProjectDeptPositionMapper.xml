<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhrenjie04.alex.manager.dao.JobUserProjectDeptPositionDao">
	<!-- cache type="org.mybatis.caches.memcached.MemcachedCache" / -->
	<resultMap type="com.zhrenjie04.alex.manager.domain.JobUserProjectDeptPosition"
		id="jobResult">
        <result property="jobId" column="job_id"/>
        <result property="projectDeptId" column="project_dept_id"/>
        <result property="groupId" column="group_id"/>
        <result property="positionId" column="position_id"/>
		<result property="otherResults.jobName" column="position_name"/>
		<result property="otherResults.projectDeptName" column="project_dept_name"/>
		<result property="otherResults.comId" column="com_id" javaType="java.lang.String"/>
		<result property="otherResults.comName" column="com_name"/>
	</resultMap>
	<select id="queryAll" resultMap="jobResult" parameterType="java.util.HashMap">
		select o.group_id,j.job_id,j.position_id,j.project_dept_id,p.position_name,pd.project_dept_name project_dept_name,pd.com_id com_id,o.org_name com_name from t_job_user_project_dept_position j left join t_position p on j.position_id=p.position_id
		left join t_project_dept pd on j.project_dept_id=pd.project_dept_id
		left join t_org o on pd.com_id=o.org_id
		where user_id=#{userId}
		and j.is_deleted=0 and j.is_locked=0
        and p.is_deleted=0 and p.is_locked=0
	</select>
</mapper> 